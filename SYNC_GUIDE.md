# üîÑ Frontend ‚Üî Backend –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## üìù –ü—Ä–æ–±–ª–µ–º–∞

**–ë—ã–ª–æ:** Drag and Drop, —Å–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á —Ä–∞–±–æ—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤ Zustand. –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Ä—è–ª–∏—Å—å.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend —á–µ—Ä–µ–∑ API.

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏** ‚ú®
**–ì–¥–µ:** `CreateModal.tsx`

```typescript
const response = await TasksAPI.create({...});

if (response.success) {
  // –î–æ–±–∞–≤–ª—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π store
  createTask(response.data);
  
  // ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  addNotification("success", "‚öîÔ∏è –ö–≤–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!", "üéØ");
}
```

**–§–ª–æ—É:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É
2. POST `/api/tasks` ‚Üí backend
3. Backend —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ –ë–î
4. –ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ Zustand
5. –í—Å–ø–ª—ã–≤–∞—à–∫–∞ "–ö–≤–µ—Å—Ç —Å–æ–∑–¥–∞–Ω!"

---

### 2. **Drag and Drop** üéØ
**–ì–¥–µ:** `Kanban.tsx`

```typescript
const handleDragEnd = async (event: DragEndEvent) => {
  // 1. –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
  await moveTask(taskId, newBoardId);
  
  // 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend
  const response = await TasksAPI.update(taskId, { boardId: newBoardId });
  
  if (response.success) {
    // ‚úÖ –£—Å–ø–µ—Ö
    addNotification("info", `–ö–≤–µ—Å—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ "${boardName}"`, "üì¶");
  } else {
    // ‚ùå –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
    await moveTask(taskId, oldBoardId);
    addNotification("error", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å", "‚ò†Ô∏è");
  }
}
```

**–§–ª–æ—É:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –∑–∞–¥–∞—á—É
2. UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **—Å—Ä–∞–∑—É** (optimistic update)
3. PATCH `/api/tasks/:id` ‚Üí backend
4. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç `boardId` –≤ –ë–î
5. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
6. –í—Å–ø–ª—ã–≤–∞—à–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ Optimistic UI - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫
- ‚úÖ Rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ—Å–∫–∏ (–µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º)

---

### 3. **–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏** ‚ùå
**–ì–¥–µ:** `SmallTaskCard.tsx`

```typescript
const handleDelete = async (e: React.MouseEvent) => {
  setDeleting(true);
  
  const success = await deleteTaskAsync(id);
  
  if (success) {
    addNotification("success", "–ö–≤–µ—Å—Ç –æ—Ç–º–µ–Ω–µ–Ω!", "‚ùå");
  } else {
    addNotification("error", "–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–º–µ–Ω–∏—Ç—å –∫–≤–µ—Å—Ç", "‚ò†Ô∏è");
    setDeleting(false);
  }
};
```

**–§–ª–æ—É:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç ‚ùå
2. –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ‚è≥
3. DELETE `/api/tasks/:id` ‚Üí backend
4. Backend —É–¥–∞–ª—è–µ—Ç –∑–∞–¥–∞—á—É –∏–∑ –ë–î
5. –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ Zustand —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞
6. –í—Å–ø–ª—ã–≤–∞—à–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ Loading state (‚è≥)
- ‚úÖ Disabled –∫–Ω–æ–ø–∫–∞ –≤–æ –≤—Ä–µ–º—è —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ store —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è backend

---

## üé® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

#### Success (–£—Å–ø–µ—Ö)
```typescript
addNotification("success", "‚öîÔ∏è –ö–≤–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!", "üéØ", 5000);
```
- **–¶–≤–µ—Ç:** –ó–æ–ª–æ—Ç–æ–π
- **–ö–æ–≥–¥–∞:** –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

#### Info (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
```typescript
addNotification("info", "–ö–≤–µ—Å—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ 'start'", "üì¶", 3000);
```
- **–¶–≤–µ—Ç:** –ó–µ–ª–µ–Ω—ã–π
- **–ö–æ–≥–¥–∞:** –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–¥–∞—á, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### Error (–û—à–∏–±–∫–∞)
```typescript
addNotification("error", "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–≤–µ—Å—Ç", "‚ò†Ô∏è", 5000);
```
- **–¶–≤–µ—Ç:** –°–µ—Ä—ã–π
- **–ö–æ–≥–¥–∞:** –û—à–∏–±–∫–∏ API, —Å–µ—Ç–∏

---

## üìä Zustand Store

### –ú–µ—Ç–æ–¥—ã:

```typescript
interface ITasksStore {
  // –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
  tasks: ITasks[];
  setTasks: (tasks: ITasks[]) => void;
  createTask: (task: ITasks) => void;
  deleteTask: (id: string) => void;  // –õ–æ–∫–∞–ª—å–Ω–æ–µ
  updateTask: (id: string, updates: Partial<ITasks>) => void;
  
  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (—Å backend)
  deleteTaskAsync: (id: string) => Promise<boolean>;
  moveTask: (taskId: string, newBoardId: string) => Promise<void>;
  
  // –£—Ç–∏–ª–∏—Ç—ã
  checkExpiredTasks: () => void;
}
```

---

## üîß API –ú–µ—Ç–æ–¥—ã

### TasksAPI:

```typescript
TasksAPI.getUserTasks(userId: string)  // GET /api/tasks?userId=xxx
TasksAPI.getById(id: string)           // GET /api/tasks/:id
TasksAPI.create(data: unknown)         // POST /api/tasks
TasksAPI.update(id: string, data)      // PATCH /api/tasks/:id
TasksAPI.complete(id: string)          // POST /api/tasks/:id/complete
TasksAPI.delete(id: string)            // DELETE /api/tasks/:id
```

---

## üéØ Optimistic UI

### –ß—Ç–æ —ç—Ç–æ?
UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **–¥–æ** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è backend, —Å–æ–∑–¥–∞–≤–∞—è –æ—â—É—â–µ–Ω–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

```typescript
// 1. –°—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ–º UI
await moveTask(taskId, newBoardId);

// 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ backend
const response = await TasksAPI.update(...);

// 3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º
if (!response.success) {
  await moveTask(taskId, oldBoardId);  // Rollback
}
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫
- ‚úÖ –•–æ—Ä–æ—à–∏–π UX
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ö†Ô∏è –ù—É–∂–µ–Ω rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã race conditions

---

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 1. –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏:
```typescript
try {
  const response = await TasksAPI.create(...);
} catch (error) {
  console.error('–û—à–∏–±–∫–∞:', error);
  addNotification("error", "–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º", "‚ò†Ô∏è");
}
```

### 2. API –æ—à–∏–±–∫–∏:
```typescript
if (response.success) {
  // –£—Å–ø–µ—Ö
} else {
  // response.error —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
  addNotification("error", response.error, "‚ò†Ô∏è");
}
```

### 3. Rollback:
```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const oldBoardId = task?.boardId;

// –û–±–Ω–æ–≤–ª—è–µ–º
await moveTask(taskId, newBoardId);

// –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
if (!response.success && oldBoardId) {
  await moveTask(taskId, oldBoardId);
}
```

---

## üìù Changelog

### –ò–∑–º–µ–Ω–µ–Ω–æ:

#### storeTasks.ts:
- ‚úÖ `moveTask` —Ç–µ–ø–µ—Ä—å `async`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `deleteTaskAsync`
- ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

#### Kanban.tsx:
- ‚úÖ `handleDragEnd` —Ç–µ–ø–µ—Ä—å `async`
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend
- ‚úÖ Rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### SmallTaskCard.tsx:
- ‚úÖ `handleDelete` —Ç–µ–ø–µ—Ä—å `async`
- ‚úÖ Loading state (‚è≥)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### CreateModal.tsx:
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:
1. –°–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É
2. ‚úÖ –í—Å–ø–ª—ã–≤–∞—à–∫–∞ "–ö–≤–µ—Å—Ç —Å–æ–∑–¥–∞–Ω"
3. ‚úÖ –ó–∞–¥–∞—á–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –¥–æ—Å–∫–∞—Ö
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
5. ‚úÖ –ó–∞–¥–∞—á–∞ –æ—Å—Ç–∞–ª–∞—Å—å –Ω–∞ –º–µ—Å—Ç–µ

### Drag and Drop:
1. –ü–µ—Ä–µ—Ç–∞—â–∏ –∑–∞–¥–∞—á—É –Ω–∞ –¥—Ä—É–≥—É—é –¥–æ—Å–∫—É
2. ‚úÖ –ó–∞–¥–∞—á–∞ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è
3. ‚úÖ –í—Å–ø–ª—ã–≤–∞—à–∫–∞ "–ö–≤–µ—Å—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω"
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É
5. ‚úÖ –ó–∞–¥–∞—á–∞ –Ω–∞ –Ω–æ–≤–æ–π –¥–æ—Å–∫–µ

### –£–¥–∞–ª–µ–Ω–∏–µ:
1. –ù–∞–∂–º–∏ ‚ùå –Ω–∞ –∑–∞–¥–∞—á–µ
2. ‚úÖ –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ‚è≥
3. ‚úÖ –í—Å–ø–ª—ã–≤–∞—à–∫–∞ "–ö–≤–µ—Å—Ç –æ—Ç–º–µ–Ω–µ–Ω"
4. ‚úÖ –ó–∞–¥–∞—á–∞ –∏—Å—á–µ–∑–∞–µ—Ç
5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É
6. ‚úÖ –ó–∞–¥–∞—á–∞ –Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–¥–∞—á–∞–º–∏ —Ç–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å backend! üéâ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ Optimistic UI (–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫)
- ‚úÖ Rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ Loading states
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î

